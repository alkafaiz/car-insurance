(this["webpackJsonpcar-insurance"]=this["webpackJsonpcar-insurance"]||[]).push([[0],{438:function(e,a,t){"use strict";t.r(a);var r=t(0),c=t.n(r),n=t(30),i=t.n(n),s=t(453),l=t(448),u=t(449),d=t(4);function o(e){var a=e.children;return Object(d.jsxs)(l.a,{children:[Object(d.jsx)(u.a,{my:10,children:"Car Insurance"})," ",a]})}var j="/steps",b="/steps/personal-details",m="/steps/car-details",h="/steps/success",p=t(55),O=t(22),f=t(39),x=t(62),v=t(451),D=t(450),C=t(452),M=t(220),g=t(40),N=t(209),S=t.n(N);t(337);function q(e){var a=e.label,t=e.isRequired,c=e.placeholder,n=e.value,i=e.onChange,s=e.error,l=e.isInvalid,u=e.inputProps,o=e.minDate,j=e.maxDate,b=Object(r.forwardRef)((function(e,a){var t=e.value,r=e.onClick,n=e.inputProps;return Object(d.jsx)(D.a,Object(O.a)(Object(O.a)({},n),{},{onClick:r,ref:a,value:t,placeholder:c,readOnly:!0}))}));return Object(d.jsxs)(x.a,{isInvalid:l,isRequired:t,mt:4,children:[Object(d.jsx)(v.a,{children:a}),Object(d.jsx)(S.a,{wrapperClassName:"datepicker-container",selected:n,onChange:i,customInput:Object(d.jsx)(b,{inputProps:u}),minDate:o,maxDate:j}),Object(d.jsx)(C.a,{"data-testid":"error-text",children:s})]})}q.defaultProps={isRequired:!1,placeholder:""};var I,k=q,y=t(464),R=t(74),F=t(13),w=t(143),P=t.n(w),Y=t(213),L=t(69),V=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(e){setTimeout((function(){e(!1===a?{success:!1,message:"Unable to process requests."}:{success:!0})}),2e3)}))},E=Object(L.b)("app/submit",function(){var e=Object(Y.a)(P.a.mark((function e(a,t){var r,c,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState().app.data.plateNumber,!("111"===r)){e.next=9;break}return e.next=5,V("/submit",!1);case 5:return c=e.sent,e.abrupt("return",t.rejectWithValue(c));case 9:return e.next=11,V("/submit");case 11:return n=e.sent,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),W=Object(L.c)({name:"app",initialState:{stepIndex:0,data:{firstName:"",lastName:"",dob:"",email:"",plateNumber:"",hasClaim:"yes",licenseYear:"0",carMake:"",carModel:"",carManufacturerDate:""},isLoading:!1,success:!1},reducers:{setStepIndex:function(e,a){e.stepIndex=a.payload},setPersonalDetails:function(e,a){e.data.firstName=a.payload.firstName,e.data.lastName=a.payload.lastName,e.data.dob=a.payload.dob,e.data.email=a.payload.email},setCarDetails:function(e,a){e.data.plateNumber=a.payload.plateNumber,e.data.hasClaim=a.payload.hasClaim,e.data.licenseYear=a.payload.licenseYear,e.data.carMake=a.payload.carMake,e.data.carModel=a.payload.carModel,e.data.carManufacturerDate=a.payload.carManufacturerDate}},extraReducers:(I={},Object(F.a)(I,E.pending,(function(e){e.isLoading=!0})),Object(F.a)(I,E.rejected,(function(e){e.isLoading=!1,e.success=!1})),Object(F.a)(I,E.fulfilled,(function(e){e.isLoading=!1,e.success=!0})),I)}),T=W.actions,z=T.setStepIndex,B=T.setPersonalDetails,J=T.setCarDetails,H=W.reducer;var U=Object(R.b)((function(e){return{initialValues:{firstName:e.app.data.firstName,lastName:e.app.data.lastName,dob:e.app.data.dob,email:e.app.data.email}}}),(function(e){return{setPersonalDetails:function(a){return e(B(a))},nextStep:function(){return e(z(1))}}}))((function(e){var a=e.nextStep,t=e.setPersonalDetails,r=e.initialValues,c=Object(s.e)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u.a,{mb:6,size:"md",children:"Personal detail"}),Object(d.jsx)(f.c,{initialValues:{firstName:r.firstName,lastName:r.lastName,dob:""===r.dob?r.dob:new Date(r.dob),email:r.email},validationSchema:g.b({firstName:g.c().required("Required"),lastName:g.c().required("Required"),email:g.c().email("Invalid email format").required("Required"),dob:g.a().required("Required")}),onSubmit:function(e){var r=new Date(e.dob).toISOString();t(Object(O.a)(Object(O.a)({},e),{},{dob:r})),a(),c.push(m)},children:function(e){return Object(d.jsxs)(f.b,{onSubmit:e.handleSubmit,children:[Object(d.jsx)(f.a,{name:"firstName",children:function(e){var a=e.field,t=e.form;return Object(d.jsxs)(x.a,{mb:4,isRequired:!0,isInvalid:t.errors.firstName&&t.touched.firstName,children:[Object(d.jsx)(v.a,{htmlFor:"first-name",children:"First name"}),Object(d.jsx)(D.a,Object(O.a)(Object(O.a)({},a),{},{id:"first-name",placeholder:"First name"})),Object(d.jsx)(C.a,{children:t.errors.firstName})]})}}),Object(d.jsx)(f.a,{name:"lastName",children:function(e){var a=e.field,t=e.form;return Object(d.jsxs)(x.a,{mb:4,isRequired:!0,isInvalid:t.errors.lastName&&t.touched.lastName,children:[Object(d.jsx)(v.a,{htmlFor:"last-name",children:"Last name"}),Object(d.jsx)(D.a,Object(O.a)(Object(O.a)({},a),{},{id:"last-name",placeholder:"Last name"})),Object(d.jsx)(C.a,{children:t.errors.lastName})]})}}),Object(d.jsx)(f.a,{name:"email",children:function(e){var a=e.field,t=e.form;return Object(d.jsxs)(x.a,{mb:4,isRequired:!0,isInvalid:t.errors.email&&t.touched.email,children:[Object(d.jsx)(v.a,{htmlFor:"email",children:"Email"}),Object(d.jsx)(D.a,Object(O.a)(Object(O.a)({},a),{},{id:"email",placeholder:"Email address"})),Object(d.jsx)(C.a,{children:t.errors.email})]})}}),Object(d.jsx)(k,{label:"Date of birth",placeholder:"Date of birth",isRequired:!0,value:e.values.dob,onChange:function(a){return e.setFieldValue("dob",a)},error:e.errors.dob,inputProps:e.getFieldProps("dob"),isInvalid:e.errors.dob&&e.touched.dob,maxDate:Object(y.a)(new Date,18),minDate:Object(y.a)(new Date,100)}),Object(d.jsx)(M.a,{mt:8,colorScheme:"teal",isLoading:e.isSubmitting,type:"submit",isFullWidth:!0,children:"Next"})]})}})]})}));function A(){return Object(r.useEffect)((function(){document.title="Personal Detail | Car Insurance"}),[]),Object(d.jsx)(U,{})}var G=t(463),K=t(221),Q=t(466),X=t(467),Z=t(457),$=t(458),_=t(459),ee=t(223),ae=t(219);var te=Object(R.b)((function(e){return{initialValues:{plateNumber:e.app.data.plateNumber,hasClaim:e.app.data.hasClaim,licenseYear:e.app.data.licenseYear,carMake:e.app.data.carMake,carModel:e.app.data.carModel,carManufacturerDate:e.app.data.carManufacturerDate},isSubmitting:e.app.isLoading,stepIndex:e.app.stepIndex}}),(function(e){return{setCarDetails:function(a){return e(J(a))},submit:function(){return e(E())},nextStep:function(){return e(z(2))},prevStep:function(){return e(z(0))}}}))((function(e){var a=e.nextStep,t=e.prevStep,c=e.initialValues,n=e.setCarDetails,i=e.submit,l=e.isSubmitting,o=e.stepIndex,j=Object(s.e)(),m=Object(G.a)();Object(r.useEffect)((function(){1!==o&&(t(),j.push(b))}),[o,t,j]);var p=function(){t(),j.push(b)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u.a,{mb:6,size:"md",children:"Car detail"}),Object(d.jsx)(f.c,{initialValues:{plateNumber:c.plateNumber,hasClaim:c.hasClaim,licenseYear:c.licenseYear,carMake:c.carMake,carModel:c.carModel,carManufacturerDate:""===c.carManufacturerDate?c.carManufacturerDate:new Date(c.carManufacturerDate)},validationSchema:g.b({plateNumber:g.c().required("Required"),licenseYear:g.c().required("Required"),carMake:g.c().required("Required"),carModel:g.c().required("Required"),carManufacturerDate:g.a().required("Required")}),onSubmit:function(e){var t=new Date(e.carManufacturerDate).toISOString();n(Object(O.a)(Object(O.a)({},e),{},{carManufacturerDate:t})),i().then(L.d).then((function(e){j.push({pathname:h,search:"?newuser=true"}),a()})).catch((function(e){m({title:"Error",description:e.message,status:"error",duration:9e3,isClosable:!0})}))},children:function(e){return Object(d.jsxs)(f.b,{onSubmit:e.handleSubmit,children:[Object(d.jsx)(f.a,{name:"plateNumber",children:function(e){var a=e.field,t=e.form;return Object(d.jsxs)(x.a,{mb:4,isRequired:!0,isInvalid:t.errors.plateNumber&&t.touched.plateNumber,children:[Object(d.jsx)(v.a,{htmlFor:"plate-number",children:"Plate number"}),Object(d.jsx)(D.a,Object(O.a)(Object(O.a)({},a),{},{id:"plate-number",placeholder:"Plate number"})),Object(d.jsx)(C.a,{children:t.errors.plateNumber})]})}}),Object(d.jsx)(f.a,{name:"hasClaim",children:function(a){a.field;var t=a.form;return Object(d.jsxs)(x.a,{as:"fieldset",mb:4,isRequired:!0,isInvalid:t.errors.hasClaim&&t.touched.hasClaim,children:[Object(d.jsx)(v.a,{as:"legend",children:"Do you made any Claims in last 5 years?"}),Object(d.jsx)(K.a,{value:e.values.hasClaim,onChange:function(a){e.setFieldValue("hasClaim",a),console.log("val",a)},children:Object(d.jsxs)(Q.a,{spacing:"24px",children:[Object(d.jsx)(X.a,{value:"yes",children:"Yes"}),Object(d.jsx)(X.a,{value:"no",children:"No"})]})})]})}}),Object(d.jsx)(f.a,{name:"licenseYear",children:function(e){var a=e.field,t=e.form;return Object(d.jsxs)(x.a,{mb:4,isRequired:!0,isInvalid:t.errors.licenseYear&&t.touched.licenseYear,children:[Object(d.jsx)(v.a,{children:"How many Years do you have Driving Licence?"}),Object(d.jsx)(Z.a,Object(O.a)(Object(O.a)({},a),{},{children:["0","1","2","3","4","5+"].map((function(e,a){return Object(d.jsx)("option",{value:e,children:e},a)}))}))]})}}),Object(d.jsx)(f.a,{name:"carMake",children:function(e){var a=e.field,t=e.form;return Object(d.jsxs)(x.a,{mb:4,isRequired:!0,isInvalid:t.errors.carMake&&t.touched.carMake,children:[Object(d.jsx)(v.a,{htmlFor:"car-make",children:"Car make"}),Object(d.jsx)(D.a,Object(O.a)(Object(O.a)({},a),{},{id:"car-make",placeholder:"Car make"})),Object(d.jsx)(C.a,{children:t.errors.carMake})]})}}),Object(d.jsx)(f.a,{name:"carModel",children:function(e){var a=e.field,t=e.form;return Object(d.jsxs)(x.a,{mb:4,isRequired:!0,isInvalid:t.errors.carModel&&t.touched.carModel,children:[Object(d.jsx)(v.a,{htmlFor:"car-model",children:"Car model"}),Object(d.jsx)(D.a,Object(O.a)(Object(O.a)({},a),{},{id:"car-model",placeholder:"Car model"})),Object(d.jsx)(C.a,{children:t.errors.carModel})]})}}),Object(d.jsx)(k,{label:"Car manufacturer date",placeholder:"Car manufacturer date",isRequired:!0,value:e.values.carManufacturerDate,onChange:function(a){return e.setFieldValue("carManufacturerDate",a)},error:e.errors.carManufacturerDate,inputProps:e.getFieldProps("carManufacturerDate"),isInvalid:e.errors.carManufacturerDate&&e.touched.carManufacturerDate,maxDate:new Date}),Object(d.jsxs)($.a,{my:8,children:[Object(d.jsx)(_.a,{mr:2,variant:"outline",colorScheme:"teal","aria-label":"go-back",icon:Object(d.jsx)(ee.a,{as:ae.a}),onClick:p,disabled:l}),Object(d.jsx)(M.a,{colorScheme:"teal",isLoading:l,type:"submit",isFullWidth:!0,children:"Submit"})]})]})}})]})}));function re(){return Object(r.useEffect)((function(){document.title="Car Detail | Car Insurance"}),[]),Object(d.jsx)(te,{})}var ce=t(6),ne=t(215),ie=t.n(ne),se=t(462),le=t(460);var ue=function(){var e=Object(s.f)(),a=Object(r.useState)(!1),t=Object(ce.a)(a,2),c=t[0],n=t[1];Object(r.useEffect)((function(){var a=ie.a.parse(e.search).newuser;a&&"true"===a&&n(!0)}),[e]);var i=function(){n(!1)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{children:"success"}),Object(d.jsxs)(se.a,{isOpen:c,onClose:i,children:[Object(d.jsx)(se.g,{}),Object(d.jsxs)(se.d,{children:[Object(d.jsx)(se.f,{children:"Welcome!"}),Object(d.jsx)(se.c,{}),Object(d.jsx)(se.b,{children:Object(d.jsx)(le.a,{children:"New user message"})}),Object(d.jsx)(se.e,{children:Object(d.jsx)(M.a,{colorScheme:"blue",onClick:i,children:"Close"})})]})]})]})};function de(){return Object(r.useEffect)((function(){document.title="Success | Car Insurance"}),[]),Object(d.jsx)(ue,{})}var oe=t(461),je=t(465),be=Object(L.a)({reducer:{app:H}}),me=Object(p.a)(),he=Object(oe.a)({styles:{global:{".datepicker-container":{width:"100%"}}}});var pe=function(){return Object(d.jsx)(R.a,{store:be,children:Object(d.jsx)(je.a,{theme:he,children:Object(d.jsx)(o,{children:Object(d.jsx)(s.c,{history:me,children:Object(d.jsxs)(s.d,{children:[Object(d.jsx)(s.a,{exact:!0,from:"/",to:b}),Object(d.jsx)(s.a,{exact:!0,from:j,to:b}),Object(d.jsx)(s.b,{path:b,component:A}),Object(d.jsx)(s.b,{path:m,component:re}),Object(d.jsx)(s.b,{path:h,component:de})]})})})})})},Oe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,468)).then((function(a){var t=a.getCLS,r=a.getFID,c=a.getFCP,n=a.getLCP,i=a.getTTFB;t(e),r(e),c(e),n(e),i(e)}))};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(pe,{})}),document.getElementById("root")),Oe()}},[[438,1,2]]]);
//# sourceMappingURL=main.4ae7fc27.chunk.js.map